---
import { mainNavItems } from '../data/navigation';

console.debug('[Sidebar] Rendering menu items:', mainNavItems.length);
---

<div class="drawer lg:drawer-open">
  <input id="sidebar-drawer" type="checkbox" class="drawer-toggle" />
  
  <!-- Drawer content -->
  <div class="drawer-content flex flex-col">
    <!-- Page content -->
    <div class="p-4">
      <slot />
    </div>
  </div>

  <!-- Sidebar content -->
  <div class="drawer-side z-[100] lg:z-0">
    <label for="sidebar-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    
    <div class="menu p-4 w-64 min-h-full bg-base-200 text-base-content">
      <!-- Close button for mobile -->
      <div class="lg:hidden flex justify-between items-center mb-4">
        <span class="text-xl font-bold">Menu</span>
        <label for="sidebar-drawer" class="btn btn-ghost btn-circle">
          <i class="ph ph-x text-2xl"></i>
        </label>
      </div>

      <!-- Menu items -->
      <ul class="space-y-2">
        {mainNavItems.map(item => (
          <li>
            <a href={item.href} class="flex items-center gap-3 p-2 hover:bg-base-300 rounded-lg">
              <i class={`${item.icon} text-xl`}></i>
              <span>{item.label}</span>
            </a>
          </li>
        ))}
      </ul>
    </div>
  </div>
</div>

<script>
  // Debug logging
  const drawerCheckbox = document.getElementById('sidebar-drawer') as HTMLInputElement;
  drawerCheckbox?.addEventListener('change', (e) => {
    const isOpen = (e.target as HTMLInputElement).checked;
    console.log(`Sidebar menu ${isOpen ? 'opened' : 'closed'}`);
  });
</script>

<!-- Import Phosphor Icons -->