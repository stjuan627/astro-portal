---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
import GameFrame from '../components/GameFrame.astro';
import { relatedGames } from '../data/relatedGames';
import RelatedGameVideos from '../components/RelatedGameVideos.astro';
import { mockVideos } from '../mocks/videoData';

console.debug('[Index] Loading related games:', relatedGames.length);
---

<Layout title="Drive Mad - Mini Game Portal">
  <div class="space-y-8">
    <!-- Hero/Game Section -->
    <div class="container px-0">
      <GameFrame
        gameUrl="https://monstertracks.github.io/file/"
        title="Drive Mad"
        coverImage="https://drive-mad.org/cache/data/image/game/drive-mad-game-m160x96.jpg"
        description="开始你的赛车冒险吧!"
      />
    </div>

    <!-- Related Games Section -->
    <section class="container">
      <h2 class="mb-8 text-2xl font-bold">相关游戏推荐</h2>
      <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6">
        {relatedGames.map(game => (
          <Card
            title={game.title}
            imageUrl={game.imageUrl}
            rating={game.rating}
            badge={game.badge}
            href={`/games/${game.id}`}
          />
        ))}
      </div>
    </section>

    <!-- Related Game Videos Section -->
    <section class="container">
      <h2 class="mb-8 text-2xl font-bold">相关游戏视频</h2>
      <RelatedGameVideos
        gameTitle="Drive Mad"
        videos={mockVideos}
      />
    </section>

  </div>
</Layout>
